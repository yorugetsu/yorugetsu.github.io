<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <title>Гра "21" (простий варіант)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #20232a;
      color: white;
      text-align: center;
      padding: 20px;
    }
    #game {
      margin: 20px auto;
      padding: 15px;
      border: 2px solid #61dafb;
      border-radius: 10px;
      max-width: 400px;
    }
    .block {
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      background-color: #282c34;
    }
    button {
      margin: 5px;
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      background-color: #61dafb;
    }
    button:disabled {
      background-color: gray;
      cursor: default;
    }
  </style>
</head>
<body>

  <h1>Гра "21"</h1>
  <p id="helloText"></p>

  <div id="game">
    <div class="block" id="userBlock">
      <h3 id="userName">Гравець</h3>
      <p>Карти: <span id="userCards">—</span></p>
      <p>Сума очок: <span id="userScore">0</span></p>
    </div>

    <div class="block" id="compBlock">
      <h3>Комп'ютер</h3>
      <p>Карти: <span id="compCards">—</span></p>
      <p>Сума очок: <span id="compScore">0</span></p>
    </div>

    <p>Раунд: <span id="roundNum">0</span> / 3</p>

    <button id="nextRoundBtn">Наступний раунд</button>
    <button id="restartBtn" disabled>Почати заново</button>

    <p id="resultText"></p>
  </div>

  <script>
    const cardNames = ["6", "7", "8", "9", "10", "Валет", "Дама", "Король", "Туз"];
    const cardValues = [6, 7, 8, 9, 10, 2, 3, 4, 11];

    const helloText = document.getElementById("helloText");
    const userNameElem = document.getElementById("userName");
    const userCardsElem = document.getElementById("userCards");
    const userScoreElem = document.getElementById("userScore");
    const compCardsElem = document.getElementById("compCards");
    const compScoreElem = document.getElementById("compScore");
    const roundNumElem = document.getElementById("roundNum");
    const resultText = document.getElementById("resultText");
    const nextRoundBtn = document.getElementById("nextRoundBtn");
    const restartBtn = document.getElementById("restartBtn");
    const userBlock = document.getElementById("userBlock");
    const compBlock = document.getElementById("compBlock");

    let userScore = 0;
    let compScore = 0;
    let userCardsText = "";
    let compCardsText = "";
    let round = 0;
    const maxRounds = 3;

    function askName() {
      let name = prompt("Введіть ваше ім'я:", "Гравець");
      if (!name || name.trim() === "") {
        name = "Гравець";
      }
      userNameElem.textContent = name;
      helloText.textContent = "Вітаю, " + name + "! Зіграємо проти комп'ютера.";
    }

    function getRandomCard() {
      const index = Math.floor(Math.random() * cardNames.length);
      return {
        name: cardNames[index],
        value: cardValues[index]
      };
    }

    function playRound() {
      if (round >= maxRounds) return;

      round++;
      roundNumElem.textContent = round;

      const userCard = getRandomCard();
      const compCard = getRandomCard();

      userScore += userCard.value;
      compScore += compCard.value;

      userCardsText = userCardsText === "" ? userCard.name : userCardsText + ", " + userCard.name;
      compCardsText = compCardsText === "" ? compCard.name : compCardsText + ", " + compCard.name;

      userCardsElem.textContent = userCardsText;
      compCardsElem.textContent = compCardsText;
      userScoreElem.textContent = userScore;
      compScoreElem.textContent = compScore;

      userBlock.style.backgroundColor = "#2e7d32";
      compBlock.style.backgroundColor = "#6a1b9a";

      if (round === maxRounds) finishGame();
    }

    function finishGame() {
      nextRoundBtn.disabled = true;
      restartBtn.disabled = false;

      userBlock.style.backgroundColor = "#282c34";
      compBlock.style.backgroundColor = "#282c34";

      if (userScore > compScore) {
        resultText.textContent = "Ви перемогли! (" + userScore + " проти " + compScore + ")";
        userBlock.style.backgroundColor = "green";
        compBlock.style.backgroundColor = "red";
      } else if (userScore < compScore) {
        resultText.textContent = "Комп'ютер переміг. (" + compScore + " проти " + userScore + ")";
        userBlock.style.backgroundColor = "red";
        compBlock.style.backgroundColor = "green";
      } else {
        resultText.textContent = "Нічия! Обидва набрали " + userScore + " очок.";
        userBlock.style.backgroundColor = "orange";
        compBlock.style.backgroundColor = "orange";
      }
    }

    function restartGame() {
      userScore = 0;
      compScore = 0;
      userCardsText = "";
      compCardsText = "";
      round = 0;

      userScoreElem.textContent = "0";
      compScoreElem.textContent = "0";
      userCardsElem.textContent = "—";
      compCardsElem.textContent = "—";
      roundNumElem.textContent = "0";
      resultText.textContent = "";

      userBlock.style.backgroundColor = "#282c34";
      compBlock.style.backgroundColor = "#282c34";

      nextRoundBtn.disabled = false;
      restartBtn.disabled = true;
    }

    nextRoundBtn.onclick = playRound;
    restartBtn.onclick = restartGame;

    askName();
  </script>
</body>
</html>
